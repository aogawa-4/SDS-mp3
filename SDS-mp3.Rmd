---
title: "SDS-mp3"
author: "Aoi Ogawa, Stella Li, Ester Zhao"
date: "4/3/2018"
output: html_document
---

```{r}

library(tidyverse)
library(sf)

macleish
```


We are doing #5. 


```{r}
# getting the table of maple syrup data and weather data

macleish <- etl("macleish")

str(macleish)
macleish %>%
etl_extract() %>%
etl_transform() %>%
etl_load()

whately <- macleish %>%
tbl("whately")

weather <- data.frame(whately)

weather_time <- data.frame(whately)


maple_sap <- data.frame(maple_sap)
```

```{r}
# # Change the when column fron date/month/year/time into date/month/year
# 
# weather$when <- format(as.Date(weather$when), "%d / %m /%Y")
```



```{r}
# making the maple syrup density graph

sap <- maple_sap %>% 
  filter(!is.na(sap)) %>%
  separate(when, c("year", "month", "day"), sep = "-")

f_weather <- weather_time %>% 
  separate(when,c("year", "month", "day"), sep = "-") %>%
  separate(day, c("day", "time"), sep = "T")

sap_2013 <- sap %>%
  filter(year == "2013")

sap_2014 <- sap %>%
  filter(year == "2014")

sap_2015 <- sap %>%
  filter(year == "2015")

when_2017 <- sap %>%
  filter(year == "2017")

sap_years <- c(sap_2013, sap_2014, sap_2015, when_2017)
```


```{r}
macleish_data_wrangle <- function(){

library(macleish)

macleish <- etl("macleish")

str(macleish)
macleish %>%
etl_extract() %>%
etl_transform() %>%
etl_load()

whately <- macleish %>%
tbl("whately")

weather <- data.frame(whately)

weather_time <- data.frame(whately)

maple_sap <- data.frame(maple_sap)

}


ggplot(sap, aes(x = when, y = sap)) +
  geom_point()


  # geom_area(fill = "darkgoldenrod1") + 
  # geom_line()

```

